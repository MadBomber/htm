<svg viewBox="0 0 900 650" xmlns="http://www.w3.org/2000/svg" style="background: transparent;">
  <defs>
    <style>
      .wm-box { fill: rgba(33, 150, 243, 0.2); stroke: #2196F3; stroke-width: 3; }
      .ltm-box { fill: rgba(76, 175, 80, 0.2); stroke: #4CAF50; stroke-width: 3; }
      .memory-item { fill: rgba(255, 152, 0, 0.3); stroke: #FF9800; stroke-width: 1.5; }
      .evicted-item { fill: rgba(244, 67, 54, 0.3); stroke: #F44336; stroke-width: 1.5; }
      .text-header { fill: #E0E0E0; font-size: 18px; font-weight: bold; }
      .text-label { fill: #E0E0E0; font-size: 13px; }
      .text-small { fill: #B0B0B0; font-size: 11px; }
      .arrow { stroke: #4A9EFF; stroke-width: 2; fill: none; marker-end: url(#arrowhead); }
      .arrow-evict { stroke: #F44336; stroke-width: 2; fill: none; marker-end: url(#arrowhead-red); stroke-dasharray: 5,3; }
      .arrow-recall { stroke: #4CAF50; stroke-width: 2; fill: none; marker-end: url(#arrowhead-green); stroke-dasharray: 5,3; }
    </style>
    <marker id="arrowhead" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
      <polygon points="0 0, 10 3, 0 6" fill="#4A9EFF" />
    </marker>
    <marker id="arrowhead-red" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
      <polygon points="0 0, 10 3, 0 6" fill="#F44336" />
    </marker>
    <marker id="arrowhead-green" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
      <polygon points="0 0, 10 3, 0 6" fill="#4CAF50" />
    </marker>
  </defs>

  <!-- Title -->
  <text x="450" y="30" text-anchor="middle" class="text-header">Working Memory Architecture</text>

  <!-- Working Memory Box -->
  <rect x="50" y="70" width="800" height="220" class="wm-box" rx="5"/>
  <text x="450" y="100" text-anchor="middle" class="text-header">Working Memory</text>
  <text x="450" y="120" text-anchor="middle" class="text-small">(In-memory, Token-limited)</text>

  <!-- Capacity bar -->
  <rect x="70" y="140" width="760" height="25" fill="rgba(255, 255, 255, 0.1)" stroke="#666" stroke-width="1" rx="3"/>
  <rect x="70" y="140" width="608" height="25" fill="rgba(76, 175, 80, 0.4)" rx="3"/>
  <text x="450" y="157" text-anchor="middle" class="text-small">102,400 / 128,000 tokens (80% full)</text>

  <!-- Memory items in working memory -->
  <rect x="70" y="180" width="150" height="40" class="memory-item" rx="3"/>
  <text x="80" y="197" class="text-label">Critical Decision</text>
  <text x="210" y="197" text-anchor="end" class="text-small">imp: 10.0</text>
  <text x="210" y="212" text-anchor="end" class="text-small">2000 tok</text>

  <rect x="235" y="180" width="150" height="40" class="memory-item" rx="3"/>
  <text x="245" y="197" class="text-label">User Preference</text>
  <text x="375" y="197" text-anchor="end" class="text-small">imp: 8.0</text>
  <text x="375" y="212" text-anchor="end" class="text-small">500 tok</text>

  <rect x="400" y="180" width="150" height="40" class="memory-item" rx="3"/>
  <text x="410" y="197" class="text-label">Recent Context</text>
  <text x="540" y="197" text-anchor="end" class="text-small">imp: 6.0</text>
  <text x="540" y="212" text-anchor="end" class="text-small">1500 tok</text>

  <rect x="565" y="180" width="150" height="40" class="evicted-item" rx="3"/>
  <text x="575" y="197" class="text-label">Old Note</text>
  <text x="705" y="197" text-anchor="end" class="text-small">imp: 2.0</text>
  <text x="705" y="212" text-anchor="end" class="text-small">800 tok</text>
  <text x="640" y="235" text-anchor="middle" class="text-small" fill="#F44336">← Being evicted</text>

  <!-- Features list -->
  <text x="70" y="260" class="text-small">✓ Fast access</text>
  <text x="250" y="260" class="text-small">✓ Token-based capacity</text>
  <text x="450" y="260" class="text-small">✓ Automatic eviction</text>
  <text x="650" y="260" class="text-small">✓ Importance-based retention</text>

  <!-- Arrow down (Eviction) -->
  <path d="M 640 290 L 640 350" class="arrow-evict"/>
  <text x="660" y="325" class="text-small" fill="#F44336">Eviction</text>
  <text x="660" y="340" class="text-small" fill="#F44336">(when full)</text>

  <!-- Arrow up (Recall) -->
  <path d="M 260 350 L 260 290" class="arrow-recall"/>
  <text x="280" y="315" class="text-small" fill="#4CAF50">Recall</text>
  <text x="280" y="330" class="text-small" fill="#4CAF50">(RAG retrieval)</text>

  <!-- Long-term Memory Box -->
  <rect x="50" y="370" width="800" height="240" class="ltm-box" rx="5"/>
  <text x="450" y="400" text-anchor="middle" class="text-header">Long-term Memory</text>
  <text x="450" y="420" text-anchor="middle" class="text-small">(PostgreSQL, Unlimited)</text>

  <!-- Database tables visualization -->
  <rect x="70" y="440" width="180" height="150" fill="rgba(76, 175, 80, 0.1)" stroke="#4CAF50" stroke-width="1" rx="3"/>
  <text x="160" y="460" text-anchor="middle" class="text-label">nodes</text>
  <text x="80" y="480" class="text-small">All memories</text>
  <text x="80" y="495" class="text-small">Vector embeddings</text>
  <text x="80" y="510" class="text-small">Full-text search</text>
  <text x="80" y="525" class="text-small">Timestamps</text>
  <text x="80" y="540" class="text-small">Importance scores</text>
  <text x="80" y="555" class="text-small">Robot attribution</text>
  <text x="80" y="570" class="text-small">in_working_memory flag</text>

  <rect x="265" y="440" width="180" height="70" fill="rgba(76, 175, 80, 0.1)" stroke="#4CAF50" stroke-width="1" rx="3"/>
  <text x="355" y="460" text-anchor="middle" class="text-label">relationships</text>
  <text x="275" y="480" class="text-small">Knowledge graph</text>
  <text x="275" y="495" class="text-small">Node connections</text>

  <rect x="460" y="440" width="180" height="70" fill="rgba(76, 175, 80, 0.1)" stroke="#4CAF50" stroke-width="1" rx="3"/>
  <text x="550" y="460" text-anchor="middle" class="text-label">tags</text>
  <text x="470" y="480" class="text-small">Categorization</text>
  <text x="470" y="495" class="text-small">Flexible tagging</text>

  <rect x="655" y="440" width="180" height="70" fill="rgba(76, 175, 80, 0.1)" stroke="#4CAF50" stroke-width="1" rx="3"/>
  <text x="745" y="460" text-anchor="middle" class="text-label">operations_log</text>
  <text x="665" y="480" class="text-small">Audit trail</text>
  <text x="665" y="495" class="text-small">PostgreSQL table</text>

  <!-- Evicted item in long-term memory -->
  <rect x="265" y="520" width="380" height="70" class="evicted-item" rx="3"/>
  <text x="275" y="540" class="text-label">Evicted: Old Note</text>
  <text x="635" y="540" text-anchor="end" class="text-small">in_working_memory: false</text>
  <text x="275" y="560" class="text-small">Still stored, can be recalled when needed</text>
  <text x="275" y="575" class="text-small">Full history preserved • Never forgotten</text>

  <!-- Features list -->
  <text x="70" y="335" class="text-small" fill="#4CAF50">✓ Durable storage</text>
  <text x="270" y="335" class="text-small" fill="#4CAF50">✓ Full history</text>
  <text x="450" y="335" class="text-small" fill="#4CAF50">✓ RAG retrieval</text>
  <text x="610" y="335" class="text-small" fill="#4CAF50">✓ Never forgets</text>
</svg>
