<svg viewBox="0 0 1000 700" xmlns="http://www.w3.org/2000/svg" style="background: transparent;">
  <!-- Title -->
  <text x="500" y="30" text-anchor="middle" fill="#FFFFFF" font-size="20" font-weight="bold">Node States in HTM</text>

  <!-- Start state -->
  <circle cx="100" cy="120" r="15" fill="#4CAF50" stroke="#4CAF50" stroke-width="3"/>
  <circle cx="100" cy="120" r="10" fill="transparent" stroke="#4CAF50" stroke-width="3"/>

  <!-- Created state -->
  <rect x="220" y="90" width="160" height="60" fill="rgba(76, 175, 80, 0.3)" stroke="#4CAF50" stroke-width="3" rx="8"/>
  <text x="300" y="125" text-anchor="middle" fill="#FFFFFF" font-size="14" font-weight="bold">Created</text>

  <!-- InBothMemories state -->
  <rect x="220" y="220" width="200" height="80" fill="rgba(33, 150, 243, 0.3)" stroke="#2196F3" stroke-width="3" rx="8"/>
  <text x="320" y="250" text-anchor="middle" fill="#FFFFFF" font-size="14" font-weight="bold">InBothMemories</text>
  <text x="320" y="270" text-anchor="middle" fill="#B0B0B0" font-size="11">in_working_memory=TRUE</text>
  <text x="320" y="288" text-anchor="middle" fill="#B0B0B0" font-size="11">Node in WM + LTM</text>

  <!-- WorkingMemoryOnly state -->
  <rect x="500" y="220" width="220" height="80" fill="rgba(255, 152, 0, 0.3)" stroke="#FF9800" stroke-width="3" rx="8"/>
  <text x="610" y="248" text-anchor="middle" fill="#FFFFFF" font-size="13" font-weight="bold">WorkingMemoryOnly</text>
  <text x="610" y="270" text-anchor="middle" fill="#B0B0B0" font-size="11">in_working_memory=FALSE</text>
  <text x="610" y="288" text-anchor="middle" fill="#B0B0B0" font-size="11">(Evicted from WM)</text>

  <!-- LongTermMemoryOnly state -->
  <rect x="780" y="220" width="200" height="80" fill="rgba(156, 39, 176, 0.3)" stroke="#9C27B0" stroke-width="3" rx="8"/>
  <text x="880" y="248" text-anchor="middle" fill="#FFFFFF" font-size="13" font-weight="bold">LongTermMemory</text>
  <text x="880" y="266" text-anchor="middle" fill="#FFFFFF" font-size="13" font-weight="bold">Only</text>
  <text x="880" y="288" text-anchor="middle" fill="#B0B0B0" font-size="11">(WM cleared)</text>

  <!-- Forgotten state -->
  <rect x="470" y="450" width="150" height="60" fill="rgba(244, 67, 54, 0.3)" stroke="#F44336" stroke-width="3" rx="8"/>
  <text x="545" y="485" text-anchor="middle" fill="#FFFFFF" font-size="14" font-weight="bold">Forgotten</text>

  <!-- End state -->
  <circle cx="545" cy="590" r="15" fill="transparent" stroke="#F44336" stroke-width="3"/>
  <circle cx="545" cy="590" r="10" fill="#F44336"/>

  <!-- Transitions -->
  <!-- Start to Created -->
  <path d="M 115 120 L 220 120" stroke="#4CAF50" stroke-width="2" fill="none" marker-end="url(#arrow1)"/>
  <text x="167" y="115" text-anchor="middle" fill="#4CAF50" font-size="11">add_node()</text>

  <!-- Created to InBothMemories -->
  <path d="M 300 150 L 300 220" stroke="#2196F3" stroke-width="2" fill="none" marker-end="url(#arrow2)"/>
  <text x="330" y="190" text-anchor="middle" fill="#2196F3" font-size="11">Initial state</text>

  <!-- InBothMemories to WorkingMemoryOnly -->
  <path d="M 420 260 L 500 260" stroke="#FF9800" stroke-width="2" fill="none" marker-end="url(#arrow3)"/>
  <text x="460" y="250" text-anchor="middle" fill="#FF9800" font-size="10">Evicted</text>
  <text x="460" y="263" text-anchor="middle" fill="#FF9800" font-size="10">from WM</text>

  <!-- InBothMemories to LongTermMemoryOnly -->
  <path d="M 420 260 Q 600 200 780 260" stroke="#9C27B0" stroke-width="2" fill="none" marker-end="url(#arrow4)"/>
  <text x="600" y="220" text-anchor="middle" fill="#9C27B0" font-size="10">WM cleared</text>

  <!-- WorkingMemoryOnly back to InBothMemories -->
  <path d="M 610 220 Q 520 180 420 220" stroke="#4CAF50" stroke-width="2" fill="none" marker-end="url(#arrow1)"/>
  <text x="520" y="185" text-anchor="middle" fill="#4CAF50" font-size="10">Recalled</text>

  <!-- LongTermMemoryOnly back to InBothMemories -->
  <path d="M 880 300 Q 680 360 420 300" stroke="#4CAF50" stroke-width="2" fill="none" marker-end="url(#arrow1)"/>
  <text x="650" y="340" text-anchor="middle" fill="#4CAF50" font-size="10">Recalled</text>

  <!-- InBothMemories to Forgotten -->
  <path d="M 320 300 L 320 380 L 490 380 L 490 450" stroke="#F44336" stroke-width="2" fill="none" marker-end="url(#arrow5)"/>
  <text x="390" y="375" text-anchor="middle" fill="#F44336" font-size="10">forget(confirm:</text>
  <text x="390" y="388" text-anchor="middle" fill="#F44336" font-size="10">:confirmed)</text>

  <!-- WorkingMemoryOnly to Forgotten -->
  <path d="M 610 300 L 610 400 L 580 400 L 580 450" stroke="#F44336" stroke-width="2" fill="none" marker-end="url(#arrow5)"/>
  <text x="640" y="380" text-anchor="middle" fill="#F44336" font-size="10">forget(confirm:</text>
  <text x="640" y="393" text-anchor="middle" fill="#F44336" font-size="10">:confirmed)</text>

  <!-- LongTermMemoryOnly to Forgotten -->
  <path d="M 880 300 L 880 400 L 600 400 L 600 450" stroke="#F44336" stroke-width="2" fill="none" marker-end="url(#arrow5)"/>
  <text x="740" y="395" text-anchor="middle" fill="#F44336" font-size="10">forget(confirm: :confirmed)</text>

  <!-- Forgotten to End -->
  <path d="M 545 510 L 545 575" stroke="#F44336" stroke-width="2" fill="none" marker-end="url(#arrow5)"/>

  <!-- Notes -->
  <rect x="20" y="360" width="180" height="120" fill="rgba(33, 150, 243, 0.1)" stroke="#2196F3" stroke-width="2" rx="5" stroke-dasharray="5,5"/>
  <text x="110" y="380" text-anchor="middle" fill="#2196F3" font-size="12" font-weight="bold">InBothMemories</text>
  <text x="110" y="400" text-anchor="middle" fill="#B0B0B0" font-size="10">Node exists in:</text>
  <text x="110" y="415" text-anchor="middle" fill="#B0B0B0" font-size="10">• Working Memory</text>
  <text x="110" y="430" text-anchor="middle" fill="#B0B0B0" font-size="10">  (fast access)</text>
  <text x="110" y="445" text-anchor="middle" fill="#B0B0B0" font-size="10">• Long-Term Memory</text>
  <text x="110" y="460" text-anchor="middle" fill="#B0B0B0" font-size="10">  (persistent)</text>
  <text x="110" y="475" text-anchor="middle" fill="#4CAF50" font-size="10" font-weight="bold">in_working_memory=TRUE</text>

  <rect x="700" y="400" width="180" height="90" fill="rgba(156, 39, 176, 0.1)" stroke="#9C27B0" stroke-width="2" rx="5" stroke-dasharray="5,5"/>
  <text x="790" y="420" text-anchor="middle" fill="#9C27B0" font-size="12" font-weight="bold">LTM Only</text>
  <text x="790" y="440" text-anchor="middle" fill="#B0B0B0" font-size="10">Node exists only in:</text>
  <text x="790" y="455" text-anchor="middle" fill="#B0B0B0" font-size="10">• Long-Term Memory</text>
  <text x="790" y="475" text-anchor="middle" fill="#F44336" font-size="10" font-weight="bold">in_working_memory=FALSE</text>
  <text x="790" y="487" text-anchor="middle" fill="#B0B0B0" font-size="9">(Evicted due to token limit)</text>

  <rect x="630" y="600" width="180" height="80" fill="rgba(244, 67, 54, 0.1)" stroke="#F44336" stroke-width="2" rx="5" stroke-dasharray="5,5"/>
  <text x="720" y="620" text-anchor="middle" fill="#F44336" font-size="12" font-weight="bold">Forgotten</text>
  <text x="720" y="640" text-anchor="middle" fill="#B0B0B0" font-size="10">Node permanently</text>
  <text x="720" y="655" text-anchor="middle" fill="#B0B0B0" font-size="10">deleted from both</text>
  <text x="720" y="670" text-anchor="middle" fill="#B0B0B0" font-size="10">memories</text>

  <!-- Markers -->
  <defs>
    <marker id="arrow1" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
      <polygon points="0 0, 10 3, 0 6" fill="#4CAF50"/>
    </marker>
    <marker id="arrow2" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
      <polygon points="0 0, 10 3, 0 6" fill="#2196F3"/>
    </marker>
    <marker id="arrow3" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
      <polygon points="0 0, 10 3, 0 6" fill="#FF9800"/>
    </marker>
    <marker id="arrow4" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
      <polygon points="0 0, 10 3, 0 6" fill="#9C27B0"/>
    </marker>
    <marker id="arrow5" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
      <polygon points="0 0, 10 3, 0 6" fill="#F44336"/>
    </marker>
  </defs>
</svg>
